<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Share Image</title>

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #f5f5f5;
}

.card {
    padding: 20px;
    text-align: center;
    width: 90%;
    max-width: 400px;
}
</style>
</head>

<body>

<div class="card shadow">
    <h5>Select Image</h5>

    <!-- Gallery Access -->
    <input 
        type="file" 
        id="imageInput" 
        accept="image/*" 
        class="form-control mb-3"
    >

    <img id="preview" style="max-width:100%; display:none; margin-bottom:10px;" />

    <button class="btn btn-success btn-block" onclick="shareImage()">
        Share Image
    </button>
</div>

<script>
let selectedFile = null;

document.getElementById('imageInput').addEventListener('change', function (e) {
    selectedFile = e.target.files[0];
    if (selectedFile) {
        const preview = document.getElementById('preview');
        preview.src = URL.createObjectURL(selectedFile);
        preview.style.display = 'block';
    }
});

async function shareImage() {
    if (!selectedFile) {
        alert("Please select an image first");
        return;
    }

    if (navigator.share && navigator.canShare({ files: [selectedFile] })) {
        try {
            await navigator.share({
                title: 'Siffin Metals',
                text: 'Sharing image from Siffin Metals',
                files: [selectedFile]
            });
        } catch (err) {
            console.error(err);
        }
    } else {
        alert("Sharing not supported on this device");
    }
}
</script>

</body>
</html>
